trigger:
- master

pool:
  vmImage: 'ubuntu-latest'


variables:
  dockerId: ${dockerId}
  namespace: pomelobutter
  imageName: pomelobutterblog
  registry: https://hub.docker.com/
  dockerfilepath: '$(Build.SourcesDirectory)/Dockerfile'


steps:
- script: |
    docker build -f $(dockerfilepath) -t $(imageName) .
    docker login -u $(dockerId) -p $(pwd) $(registry)
    docker tag $(imageName) $(registry)/$(namespace)/$(imageName)
    docker push $(registry)/$(namespace)/$(imageName)
  displayName: push to dockerhub